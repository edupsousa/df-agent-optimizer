(this["webpackJsonpdf-agent-optimizer"]=this["webpackJsonpdf-agent-optimizer"]||[]).push([[0],{51:function(e,n,t){},65:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(13),s=t.n(c),i=(t(50),t(51),t(69)),o=t(8),u=t(7),l=t.n(u),j=t(9),b=t(6),f=t(71),p=t(44),h=t(67),d=t(18),O=t(43),x=t(42),m=t(39),g=t(41),v=t.n(g);function w(e){return y.apply(this,arguments)}function y(){return(y=Object(j.a)(l.a.mark((function e(n){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v()(),e.next=3,t.loadAsync(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(e){return function(){var n=Object(j.a)(l.a.mark((function n(t){var r,a,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w(t);case 2:return r=n.sent,n.next=5,E(r);case 5:return a=n.sent,n.next=8,A(r);case 8:c=n.sent,e({agentConfig:a,intentList:c,isLoaded:!0,rawData:t});case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},k=/^intents\/(((?!_usersays_).)*)\.json$/;function A(e){return I.apply(this,arguments)}function I(){return(I=Object(j.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(n.file(k).map(L)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return S.apply(this,arguments)}function S(){return(S=Object(j.a)(l.a.mark((function e(n){var t,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.async("string");case 2:return t=e.sent,e.prev=3,r=N(n.name),a=JSON.parse(t),e.abrupt("return",{filename:r,intent:a});case 9:throw e.prev=9,e.t0=e.catch(3),new Error("Error parsing intent file ".concat(n.name,": ").concat(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function E(e){return F.apply(this,arguments)}function F(){return(F=Object(j.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.file("agent.json")){e.next=3;break}throw new Error("Agent config not found (agent.json).");case 3:return e.t0=JSON,e.next=6,t.async("string");case 6:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){var n=k.exec(e);if(null===n)throw new Error("Error extracting intent name from intent file ".concat(e));return Object(b.a)(n,2)[1]}var R=function(e,n,t){return function(){var e=Object(j.a)(l.a.mark((function e(t){var r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=n().rawData)){e.next=3;break}throw new Error("Can't rename intents, zip file isn't loaded.");case 3:return e.next=5,w(r);case 5:return a=e.sent,t.forEach((function(e){var n=e.filename,t=e.intent,r=e.newName;t.name!==r&&(a.remove("intents/".concat(n,".json")),a.file("intents/".concat(r,".json"),JSON.stringify(Object(d.a)(Object(d.a)({},t),{},{name:r}),null,2)))})),e.next=9,a.generateAsync({type:"binarystring",compression:"DEFLATE"});case 9:return c=e.sent,e.abrupt("return",n().loadAgent(c));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},D={isLoaded:!1,agentConfig:null,intentList:null,rawData:null},z=Object(x.a)(Object(m.persist)(Object(m.devtools)((function(e,n,t){return Object(d.a)(Object(d.a)({},D),function(e,n,t){return{loadAgent:C(e),unloadAgent:function(){return e(D)},renameIntents:R(0,n)}}(e,n))})),{name:"agent-storage",getStorage:function(){return sessionStorage}})),B=Object(O.a)(z),J=t(1);function P(){var e=B(),n=Object(r.useState)(null),t=Object(b.a)(n,2),a=t[0],c=t[1],s=function(){var n=Object(j.a)(l.a.mark((function n(t){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),t.stopPropagation(),null!==a){n.next=4;break}return n.abrupt("return");case 4:return n.t0=e,n.next=7,T(a);case 7:n.t1=n.sent,n.t0.loadAgent.call(n.t0,n.t1);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(J.jsxs)(f.a,{onSubmit:s,children:[Object(J.jsx)("h1",{children:"Import Agent"}),Object(J.jsxs)(f.a.Row,{children:[Object(J.jsx)(p.a,{children:Object(J.jsx)(f.a.File,{id:"zipFile",label:a?a.name:"Select an exported DialogFlow Agent (.zip file)",onChange:function(e){e.target.files&&e.target.files.length>0&&c(e.target.files[0])},custom:!0})}),Object(J.jsx)(p.a,{xs:"auto",children:Object(J.jsx)(h.a,{variant:"primary",type:"submit",disabled:null===a,children:"Import Agent"})})]})]})}function T(e){return G.apply(this,arguments)}function G(){return(G=Object(j.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var r=new FileReader;r.readAsBinaryString(n),r.onload=function(){return e(r.result)},r.onerror=function(){return t(r.error)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=t(70),$=t(72);function _(){var e=B();return Object(J.jsxs)(M.a,{bg:"light",expand:"lg",className:"mb-3",children:[Object(J.jsx)(M.a.Brand,{href:"#home",children:"React-Bootstrap"}),Object(J.jsx)(M.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(J.jsxs)(M.a.Collapse,{id:"basic-navbar-nav",children:[Object(J.jsxs)($.a,{className:"mr-auto",children:[e.agentConfig&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(o.a,{href:"/intents",children:Object(J.jsx)($.a.Link,{children:"List Intents"})}),Object(J.jsx)(o.a,{href:"/rename-intents",children:Object(J.jsx)($.a.Link,{children:"Rename Intents"})})]}),!e.agentConfig&&Object(J.jsx)($.a.Link,{href:"#home",children:"Import Agent"})]}),Object(J.jsxs)(M.a.Text,{children:["Agent: ",!e.agentConfig&&Object(J.jsx)("span",{children:"None"}),e.agentConfig&&Object(J.jsxs)("span",{children:[e.agentConfig.displayName,Object(J.jsx)(h.a,{variant:"outline-dark ml-2",onClick:function(){return e.unloadAgent()},children:"Unload Agent"})]})]})]})]})}function U(){var e=B().intentList,n=Object(r.useMemo)((function(){return null===e?[]:e.slice().map((function(e){return e.intent})).sort((function(e,n){return e.name>n.name?1:e.name<n.name?-1:0}))}),[e]);return Object(J.jsxs)("div",{children:[Object(J.jsx)("h1",{children:"Intents"}),Object(J.jsxs)("ul",{children:[n&&n.map((function(e){return Object(J.jsx)("li",{children:e.name},e.id)})),!n&&Object(J.jsx)("li",{children:"No intents to show"})]})]})}var q=t(73),H=t(68);function K(){var e=Object(r.useState)(!1),n=Object(b.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(!1),s=Object(b.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(""),l=Object(b.a)(u,2),j=l[0],h=l[1],d=Object(r.useState)(""),O=Object(b.a)(d,2),x=O[0],m=O[1],g=Object(r.useState)(null),v=Object(b.a)(g,2),w=v[0],y=v[1],C=B().intentList,k=Object(r.useMemo)((function(){return null===C?[]:C.slice().map((function(e){return e.intent})).filter((function(e){return t&&w?w.test(e.name):(i?e.name.toLowerCase():e.name).includes(i?j.toLowerCase():j)})).sort((function(e,n){return e.name>n.name?1:e.name<n.name?-1:0}))}),[C,w,t,j,i]);Object(r.useEffect)((function(){if(t)try{var e=new RegExp(j,i?"i":void 0);y(e)}catch(n){y(null)}}),[j,i,t]);var A=function(e,n,t){var r=n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),a=new RegExp(r,"ig");return e.replace(a,t)};return Object(J.jsxs)("div",{children:[Object(J.jsx)("h1",{children:"Rename Intents"}),Object(J.jsxs)(f.a,{children:[Object(J.jsxs)(f.a.Group,{as:H.a,controlId:"filter",children:[Object(J.jsx)(f.a.Label,{column:!0,sm:2,children:"Find:"}),Object(J.jsx)(p.a,{sm:10,children:Object(J.jsx)(f.a.Control,{type:"text",value:j,onChange:function(e){return h(e.target.value)}})})]}),Object(J.jsxs)(f.a.Group,{as:H.a,controlId:"replacement",children:[Object(J.jsx)(f.a.Label,{column:!0,sm:2,children:"Replace:"}),Object(J.jsx)(p.a,{sm:10,children:Object(J.jsx)(f.a.Control,{type:"text",value:x,onChange:function(e){return m(e.target.value)}})})]}),Object(J.jsx)(f.a.Group,{as:H.a,controlId:"caseInsensitive",children:Object(J.jsx)(p.a,{sm:{span:10,offset:2},children:Object(J.jsx)(f.a.Check,{label:"Case Insensitive",checked:i,onChange:function(e){return o(e.target.checked)}})})}),Object(J.jsx)(f.a.Group,{as:H.a,controlId:"isRegexp",children:Object(J.jsx)(p.a,{sm:{span:10,offset:2},children:Object(J.jsx)(f.a.Check,{label:"Regular Expression",checked:t,onChange:function(e){return a(e.target.checked)}})})})]}),"Matched ",k.length," intents.",Object(J.jsx)(q.a,{children:k&&k.map((function(e){return Object(J.jsx)(q.a.Item,{children:Object(J.jsxs)(H.a,{children:[Object(J.jsx)(p.a,{children:e.name}),Object(J.jsx)(p.a,{xs:"auto",children:"->"}),Object(J.jsx)(p.a,{className:"text-right",children:(n=e.name,t?w?n.replace(w,x):n:i?A(n,j,x):n.replaceAll(j,x))})]})},e.id);var n}))})]})}var Q=function(){var e=B();return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(_,{}),Object(J.jsxs)(i.a,{children:[e.agentConfig&&Object(J.jsxs)(o.d,{children:[Object(J.jsx)(o.c,{path:"/intents",component:U}),Object(J.jsx)(o.c,{path:"/rename-intents",component:K}),Object(J.jsx)(o.c,{children:Object(J.jsx)(o.b,{to:"/intents"})})]}),!e.agentConfig&&Object(J.jsxs)(o.d,{children:[Object(J.jsx)(o.c,{path:"/import",component:P}),Object(J.jsx)(o.c,{children:Object(J.jsx)(o.b,{to:"/import"})})]})]})]})},V=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,74)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,s=n.getTTFB;t(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(J.jsx)(a.a.StrictMode,{children:Object(J.jsx)(Q,{})}),document.getElementById("root")),V()}},[[65,1,2]]]);
//# sourceMappingURL=main.1a40be35.chunk.js.map